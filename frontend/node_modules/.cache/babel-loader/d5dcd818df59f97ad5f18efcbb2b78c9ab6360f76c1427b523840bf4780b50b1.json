{"ast":null,"code":"import React,{useState}from'react';import'../App.css';import{InputWithButton,Input}from'./Input';import{Context}from'./context';import{Button}from'./Button';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";async function searchVocab(word){try{let resp=await fetch(\"https://api.dictionaryapi.dev/api/v2/entries/en/\".concat(word));if(!resp.ok){if(resp.status===404){throw new Error('Word not found in the dictionary');}let error=await resp.text();throw new Error(error);}let data=await resp.json();return data;}catch(error){console.error('Error:',error);return null;}}function App(){let initial={'word':'hello','单词':'hello /həˈloʊ/','解释':'greeting or salutation'};const[vocabList,setVocabList]=useState([initial]);const[inputValue,setInputValue]=useState('');const[filled,setFilled]=useState(true);const[searchValue,setSearchValue]=useState('');const[searchMeaning,setSearchMeaning]=useState('');const[isCollapsed,setIsCollapsed]=useState(false);const[isClicked,setIsClicked]=useState(false);function handler0(){searchVocab(inputValue).then(data=>{var _data$0$phonetics$0$t,_data$,_data$$phonetics,_data$$phonetics$;console.log(data);let newVocab={'word':inputValue,'单词':\"\".concat(inputValue,\"  \").concat((_data$0$phonetics$0$t=data===null||data===void 0?void 0:(_data$=data[0])===null||_data$===void 0?void 0:(_data$$phonetics=_data$.phonetics)===null||_data$$phonetics===void 0?void 0:(_data$$phonetics$=_data$$phonetics[0])===null||_data$$phonetics$===void 0?void 0:_data$$phonetics$.text)!==null&&_data$0$phonetics$0$t!==void 0?_data$0$phonetics$0$t:'/no phonetics was found/'),'解释':''};const eventSource=new EventSource(\"http://843t182d14.vicp.fun:80/chat?content=the meaning of \".concat(inputValue));eventSource.onmessage=function(event){newVocab['解释']+=event.data;setVocabList([...vocabList,newVocab]);};console.log(vocabList.length);});setInputValue('');}function handler1(){if(inputValue){console.log(vocabList.filter(para=>para.word!==inputValue));setVocabList(vocabList.filter(para=>para.word!==inputValue));}else{setVocabList(vocabList.slice(0,-1));}setInputValue('');}function handler2(){vocabList.map((key,index)=>{if(key.word===searchValue){console.log(key['解释']);setSearchMeaning(key['解释']);}setSearchValue('');});}return/*#__PURE__*/_jsx(Context.Provider,{value:{handler0,handler1,handler2,filled},children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"word-list\",children:[\" \",vocabList.map((key,index)=>{return/*#__PURE__*/_jsx(\"ul\",{children:Object.entries(key).map((_ref,index)=>{let[key,value]=_ref;if(key!=='word'){return/*#__PURE__*/_jsx(\"li\",{children:\"\".concat(key,\": \").concat(value)},index);}})},index);}),/*#__PURE__*/_jsx(\"div\",{className:\"inputing\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",inputValue]})})]}),isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"word-list no-column-flex\",children:[\" \",vocabList.map((key,index)=>{return/*#__PURE__*/_jsx(\"ul\",{className:\"collapsed\",style:{},children:/*#__PURE__*/_jsx(\"li\",{children:key['单词']},index)});}),/*#__PURE__*/_jsx(\"div\",{className:\"inputing\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",inputValue,\" \"]})})]}),/*#__PURE__*/_jsx(InputWithButton,{value:inputValue,type:\"text\",onChange:e=>{setInputValue(e.target.value);setFilled(e.target.value.length==0);},handlers:handler0}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"\\u67E5\\u627E\\u751F\\u8BCD\\u672C\\u7684\\u5355\\u8BCD\",value:searchValue,type:\"text\",onChange:e=>{setSearchValue(e.target.value);},handlers:handler2}),/*#__PURE__*/_jsx(Button,{styles:{\"fontSize\":'0.5rem',\"borderRadius\":0},event:\"\\u67E5\\u627E\",handler:handler2}),/*#__PURE__*/_jsx(Button,{styles:{\"fontSize\":'0.5rem',\"borderRadius\":0},event:\"\\u6E05\\u9664\",handler:()=>{setSearchMeaning('');}})]}),/*#__PURE__*/_jsx(\"p\",{children:searchMeaning}),/*#__PURE__*/_jsx(Button,{styles:{\"fontSize\":'0.5rem',\"borderRadius\":0,\"margin\":'10px'},event:isClicked?'展开':'收起',handler:()=>{setIsCollapsed(!isCollapsed);setIsClicked(!isClicked);}}),/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:\"\\xA9 2024 Kitty Bob. All rights reserved.\"})]})});}export default App;","map":{"version":3,"names":["React","useState","InputWithButton","Input","Context","Button","jsx","_jsx","jsxs","_jsxs","searchVocab","word","resp","fetch","concat","ok","status","Error","error","text","data","json","console","App","initial","vocabList","setVocabList","inputValue","setInputValue","filled","setFilled","searchValue","setSearchValue","searchMeaning","setSearchMeaning","isCollapsed","setIsCollapsed","isClicked","setIsClicked","handler0","then","_data$0$phonetics$0$t","_data$","_data$$phonetics","_data$$phonetics$","log","newVocab","phonetics","eventSource","EventSource","onmessage","event","length","handler1","filter","para","slice","handler2","map","key","index","Provider","value","children","className","Object","entries","_ref","style","type","onChange","e","target","handlers","placeholder","styles","handler"],"sources":["/Users/albert/Desktop/web/web/frontend/src/components/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport '../App.css';\nimport { InputWithButton,Input } from './Input';\nimport { Context } from './context';\nimport { Button } from './Button';\n\n\nasync function searchVocab(word) {\n  try {\n   \n    let resp = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);\n    if (!resp.ok) {\n      if (resp.status === 404) {\n        throw new Error('Word not found in the dictionary');\n      }\n      let error = await resp.text();\n      throw new Error(error);\n    }\n    let data = await resp.json();\n\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return null;\n  }\n}\n\n  function App() {\n\n    let initial ={\n      'word': 'hello',\n      '单词': 'hello /həˈloʊ/',\n      '解释': 'greeting or salutation',\n      }\n\n  const [vocabList,setVocabList] = useState([initial]);\n  const [inputValue,setInputValue] = useState('');\n  const [filled,setFilled] = useState(true);\n  const [searchValue,setSearchValue] = useState('');\n  const [searchMeaning,setSearchMeaning] = useState('');\n  const [isCollapsed,setIsCollapsed] = useState(false);\n  const [isClicked,setIsClicked] = useState(false);\n\n\n\n   function handler0(){\n\n    searchVocab(inputValue).then((data) => {\n      console.log(data);\n\n      \n      let newVocab = {\n        'word':inputValue,\n        '单词': `${inputValue}  ${data?.[0]?.phonetics?.[0]?.text ?? '/no phonetics was found/'}`, \n        '解释': '',\n      }\n      const eventSource = new EventSource(`http://843t182d14.vicp.fun:80/chat?content=the meaning of ${inputValue}`);\n      eventSource.onmessage = function(event) {\n        newVocab['解释'] += event.data;\n        setVocabList([...vocabList,newVocab])\n      }\n      console.log(vocabList.length);\n      \n     \n    })\n    setInputValue('');\n  }\n\n  function handler1(){\n    if (inputValue) {\n      console.log(vocabList.filter(para => para.word !== inputValue))\n      setVocabList(vocabList.filter(para => para.word !== inputValue));\n    } else {\n      setVocabList(vocabList.slice(0, -1));\n    }\n    setInputValue('');\n  }\n\n  function handler2(){\n    vocabList.map((key, index) => {\n      if (key.word === searchValue) {\n        console.log(key['解释']);\n        setSearchMeaning(key['解释'])    \n        }\n        setSearchValue('');\n    })\n  }\n\n\n  return (\n  <Context.Provider value={{handler0, handler1,handler2,filled}}>\n    <div className='container'>\n   \n    {!isCollapsed && <div className='word-list'> {\n      \n      vocabList.map((key, index) => {\n            return (\n              <ul key={index}>\n                {Object.entries(key).map(([key, value], index) => {\n                  if (key !== 'word') {\n                    return <li key={index}>{`${key}: ${value}`}</li>;\n                  }\n                })}\n              </ul>\n            );\n          })}\n        \n\n        <div className='inputing'>\n          <p> {inputValue}</p>\n        </div>\n    </div>\n    }\n     {isCollapsed && <div className='word-list no-column-flex'> {\n      \n      vocabList.map((key, index) => {\n        \n            return (\n            <ul className='collapsed' style={{\n         \n        }}>\n              <li key={index}>{key['单词']}</li>\n              </ul>  );\n          \n          })\n          }\n          \n        \n\n        <div className='inputing'>\n          <p> {inputValue} </p>\n        </div>\n    </div>\n    }\n    <InputWithButton  value={inputValue}  type=\"text\"  onChange={\n      (e) =>{\n       setInputValue(e.target.value);\n       setFilled(e.target.value.length == 0);\n    }\n    } handlers={handler0} />\n    <div className='search-bar'>\n      <Input placeholder='查找生词本的单词' value={searchValue}  type=\"text\"onChange={\n      (e) =>{\n       setSearchValue(e.target.value);\n    }\n    } handlers={handler2} />\n    \n   \n    \n    <Button styles={{\"fontSize\":'0.5rem',\"borderRadius\":0}} event='查找' handler={handler2} />\n    <Button styles={{\"fontSize\":'0.5rem',\"borderRadius\":0}} event='清除' handler={()=>{setSearchMeaning('')}} />\n    </div>\n    \n    <p>{searchMeaning}</p>\n    <Button \n  styles={{\"fontSize\":'0.5rem', \"borderRadius\":0, \"margin\": '10px'}} \n  event={isClicked ? '展开' : '收起'} \n  handler={() => {\n    setIsCollapsed(!isCollapsed);\n    setIsClicked(!isClicked);\n  }} \n/>\n    <div className='footer'>© 2024 Kitty Bob. All rights reserved.</div>\n    \n  \n   </div> \n  </Context.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}